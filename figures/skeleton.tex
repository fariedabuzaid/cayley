\begin{tikzpicture}[scale=0.85,every node/.style={scale=0.85}]
	\node at (-0.75,0.2){$v_{i+1}=$};
	\node at (-0.75,-1.4){$u=$};
	\node at (-0.75,-2.2){$u=$};
	
	\draw (0,0) rectangle (15,0.75);
	\draw (0, -1) rectangle (10,-1.75);
	\draw (5, -1.75) rectangle (15,-2.5);
	
	\draw (6,.75) -- (6,0);
	\draw (7.5,.75) -- (7.5,0);
	\draw (9,.75) -- (9,0);
	
	\node at (6.8,0.35) {$\mathcal{S}_r(w)[i]$};
	\node at (8.25,0.35) {$a^ib^r$};
	
	\draw (6,-1) -- (6,-2.5);
	\draw (7.5,-1) -- (7.5,-2.5);
	\draw (9,-1) -- (9,-2.5);
	\draw (11,-1.75) -- (11,-2.5);
	\draw (12.5,-1.75) -- (12.5,-2.5);
	\draw (14,-1.75) -- (14,-2.5);
	\draw (11,0) -- (11,0.75);
	\draw (12.5,0) -- (12.5,.75);
	\draw (14,0) -- (14,.75);
	
	\node at (6.8,-1.4) {$\mathcal{S}_r(w)[i]$};
	\node at (6.8,-2.2) {$\mathcal{S}_r(w)[i]$};
	\node at (8.25,-1.35) {$a^ib^r$};
	\node at (8.25,-2.15) {$a^ib^r$};
	\node at (11.8,-2.2) {$\mathcal{S}_r(w)[i]$};
	\node at (13.25,-2.15) {$a^ib^r$};
	\node at (11.8,0.35) {$\mathcal{S}_r(w)[i]$};
	\node at (13.25,0.35) {$a^ib^r$};
	
	\draw[->,>=latex'] (6.75,-0.1) -- (6.75,-0.9);
	\draw[->,>=latex'] (8.25,-0.1) -- (8.25,-0.9);
	\draw[->,>=latex'] (9.1,-2.125) -- (10.9,-2.125);
	\draw[->,>=latex'] (11.75,-1.65) -- (11.75,-0.1);
	\draw[->,>=latex'] (13.25,-1.65) -- (13.25,-0.1);
	
	\draw[snake=brace] (0,0.8) -- (6,0.8);
	\draw[snake=brace] (9,0.8) -- (15,0.8);
	
	\node at (3,1.1) {$v_i$};
	\node at (12,1.1) {$v_i$};
\end{tikzpicture}